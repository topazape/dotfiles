#!/bin/sh

layout_poetry() {
  if [[ ! -f pyproject.toml ]]; then
    log_error 'No pyproject.toml found.  Use `poetry new` or `poetry init` to create one first.'
    exit 2
  fi
  local VENV=$(dirname $(poetry run which python))
  export VIRTUAL_ENV=$(echo "$VENV" | rev | cut -d'/' -f2- | rev)
  export POETRY_ACTIVE=1
  PATH_add "$VENV"
}

use_jupyter() {
	export IPYTHONDIR="$VIRTUAL_ENV/.ipython"
	export JUPYTER_CONFIG_DIR="$VIRTUAL_ENV/.jupyter"
}

use_rdkit() {
	export LD_LIBRARY_PATH="$VIRTUAL_ENV/lib":"$HOME/.linuxbrew/lib":$LD_LIBRARY_PATH
}

use_gpu() {
	export CUDA_ROOT="/usr/local/cuda"
	export PATH="/usr/local/cuda/bin":$PATH
	export CUDA_VISIBLE_DEVICES=$1
	export LD_LIBRARY_PATH="/usr/local/cuda/lib64":"/usr/local/cuda/extras/CUPTI/lib64":$LD_LIBRARY_PATH
}
